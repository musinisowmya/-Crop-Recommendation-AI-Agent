{
  "name": "My workflow 3",
  "nodes": [
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chatTrigger",
      "typeVersion": 1.3,
      "position": [
        -208,
        80
      ],
      "id": "b081e867-e383-4e69-8abc-5904772f8566",
      "name": "When chat message received",
      "webhookId": "1f0b9ad3-a660-482d-8b05-c27f3c21b8d5"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "soil_type, temperature_c, rainfall_mm, season, location, market_preference",
        "contextWindowLength": 6
      },
      "type": "@n8n/n8n-nodes-langchain.memoryBufferWindow",
      "typeVersion": 1.3,
      "position": [
        16,
        272
      ],
      "id": "a522cb85-199d-49d2-b05a-7ca7c5966660",
      "name": "Simple Memory"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatCohere",
      "typeVersion": 1,
      "position": [
        -144,
        272
      ],
      "id": "f4e4510b-c45f-498b-b4a1-f90712a126ce",
      "name": "Cohere Chat Model",
      "credentials": {
        "cohereApi": {
          "id": "sQsQOiyg1jJw8STx",
          "name": "CohereApi account"
        }
      }
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "crop recommendation assistant for Indian and global contexts.Conversation so far:\n{{ $(\"Previous Node\").item.json.history }}\n\nGoal: recommend 3–5 crops that fit the user's conditions.\n\nAsk only one question at a time until you have:\n\nsoil_type (loam, clay, sandy, laterite, black, red, etc.)\ntemperature_c (typical range or average)\nrainfall_mm (monthly or seasonal)\nseason (kharif/monsoon, rabi/winter, summer) OR month\nlocation (village/city and state/country)\nmarket_preference (local retail / wholesale / open to niche/high-value)\nRules:\n\nIf any item is missing, politely ask for it.\nUse short, practical language. Avoid long theory.\nConsider agronomic fit (soil, temp, rain, season) AND a brief market angle.\nReturn:\nA quick summary\nA bullet list of recommended crops with reasons (2–3 lines each)\nBasic planting window and irrigation note\nA short market tip (demand/price direction and buyer types)\nIf inputs conflict (e.g., very low rainfall with water-loving crop), warn and offer alternatives.\nIf the user asks again later, reuse remembered values unless they change them.\nKeep answers under 12 bullets total.Do not mention memory or that you are remembering previous responses.\nExample:\n\nRules:\n- If any item is missing, politely ask for it.\n- Use short, practical language. Avoid long theory.\n- Do not mention memory or that you are remembering previous responses.",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2.2,
      "position": [
        0,
        80
      ],
      "id": "7b3164a2-79db-4663-9a9f-87bbdf92567e",
      "name": "AI Agent"
    }
  ],
  "pinData": {},
  "connections": {
    "When chat message received": {
      "main": [
        [
          {
            "node": "AI Agent",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Simple Memory": {
      "ai_memory": [
        [
          {
            "node": "AI Agent",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "Cohere Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "AI Agent",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "56395b33-d1d3-4110-be1d-2b9b9d2abc44",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "1359c1753370b259e56b66894c06a3cbfd2b0518fc46b6789a3f93682e7c00b5"
  },
  "id": "dx1jDjQbpCpi0W9J",
  "tags": []
}